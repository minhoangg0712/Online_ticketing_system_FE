<div class="event-detail-container" *ngIf="eventData">
  <!-- Hero Section -->
  <div class="hero" [style.backgroundImage]="'url(' + eventData.backgroundUrl + ')'">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1>{{ eventData.eventName }}</h1>
      <p class="event-meta">
        üìÖ {{ eventData.startTime | date:'dd-MM-yyyy' }} | ‚è∞ {{ eventData.startTime | date:'HH:mm' }}
      </p>
      <p class="event-meta">üìç {{ eventData.address }}</p>
    </div>
  </div>

    <!-- Review Section -->
    <div class="review-section">
        <div class="review-left">
            <h2>ƒê√°nh gi√° t·ª´ ng∆∞·ªùi tham gia</h2>
            <div class="review-list">
              <div class="review-card" *ngFor="let r of reviews">
                <img class="avatar" [src]="r.userProfilePicture || 'assets/default-avatar.png'" />
                <div class="review-content">
                  <div class="review-header">
                    <strong>{{ r.userFullName }}</strong>
                    <div class="review-actions">
                      <span class="stars">
                        <ng-container *ngFor="let s of [].constructor(5); let i = index">
                          <span [class.filled]="i < r.rating">‚òÖ</span>
                        </ng-container>
                      </span>
                      <span class="menu-icon" (click)="toggleMenu(r.reviewId, $event)">‚ãÆ</span>
                      <div class="menu" *ngIf="activeMenuId === r.reviewId">
                        <button (click)="editReview(r)">Ch·ªânh s·ª≠a</button>
                        <button (click)="deleteReview(r)">X√≥a</button>
                      </div>
                    </div>
                  </div>
                  <p class="review-date">{{ r.reviewDate | date:'dd-MM-yyyy' }}</p>
                  <p class="review-text">{{ r.comment }}</p>
                </div>
              </div>
            </div>
        </div>
        <div class="review-right">
          <h2>{{ isEditing ? 'Ch·ªânh s·ª≠a ƒë√°nh gi√°' : 'G·ª≠i ƒë√°nh gi√° c·ªßa b·∫°n' }}</h2>
          <div class="rating-stars">
            <span
              class="star"
              *ngFor="let s of [].constructor(5); let i = index"
              [class.active]="i < selectedRating"
              (click)="selectRating(i + 1)"
            >‚òÖ</span>
          </div>
          <textarea
            placeholder="Chia s·∫ª c·∫£m nh·∫≠n c·ªßa b·∫°n..."
            [(ngModel)]="comment"
          ></textarea>
          <div class="form-buttons">
            <button (click)="submitReview()" class="btn-edit">
              {{ isEditing ? 'C·∫≠p nh·∫≠t ƒë√°nh gi√°' : 'G·ª≠i ƒë√°nh gi√°' }}
            </button>
            <button *ngIf="isEditing && hasMyReview" class="btn-cancel-edit" (click)="cancelEdit()">
              H·ªßy ch·ªânh s·ª≠a
            </button>
          </div>
        </div>
    </div>

  <!-- Popup x√°c nh·∫≠n -->
  <div class="popup-overlay" *ngIf="showDeletePopup">
    <div class="popup">
      <h3>X√°c nh·∫≠n x√≥a</h3>
      <p>B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ƒë√°nh gi√° n√†y?</p>
      <div class="popup-buttons">
        <button class="btn-cancel" (click)="cancelDelete()">H·ªßy</button>
        <button class="btn-confirm" (click)="confirmDelete()">X√≥a</button>
      </div>
    </div>
  </div>
</div>
<app-toast-notification 
  #notification
  (onClose)="onNotificationClose()">
</app-toast-notification>



